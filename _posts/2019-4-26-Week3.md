---
layout: post
title: Week 3 - Multiple Panels
---

## Goal for the Week:
* Control a single LED panel in sync with music

### Hardware/Mechanical Work:
For the electrical part, this week we wired up ATTINY45s to be slave boards to take in signals from an Mbed and output signals to the LED strips. For each panel, we set up an ATTINY in the bottom layer and soldered the circuit on a perfboard. For the mechanical part, we replaced the smoke acrylic with raster etched clear acrylic in an attempt to diffuse the light from the LED strips into a larger portion of the top of the hexagonal panel. This did not work quite as well as we had hoped, but is definitely an improvement from the smoke acrylic we were previously using. In general, we tried to modularize the system so we duplicated 5 panels with our new design and wired them together, which required a lot of laser cutting and soldering.


### Software Work:
The main software update for this week was changing the communication protocol between microcontrollers to deal with multiple panels. First, we had to switch the protocol so that it could work with the slave board being an ATTINY45 instead of the Mbed that we originally had as slave boards. This also required writing code to the ATTINY45s so that they could receive the communications and then drive the LED strips. We then had to expand the protocol so that each panel could be referenced individually. Finally, due to the fact that we were sending signals to each slave board in parallel and the fact that the slave boards were ATTINY45s instead of Mbeds, we had to make the protocol more robust so that if a bit was dropped, the signal was not distorted. Along with the communication protocol expansion, we also updated the animation code on the Mbed so that the animation would cause several panels to light up in slightly different ways.

## Results from this Week:
The result from this week is that we have a three panels system which responds to the base of a song. Each panel is lit up slightly differently to show that the panels can be individually referenced. 
